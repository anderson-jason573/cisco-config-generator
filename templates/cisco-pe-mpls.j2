hostname {{ hostname }}
!
interface Loopback0
 ip address {{ loopback0_ip_address }} 255.255.255.255
 ip router isis
!
{% for interface in interfaces %}
!
interface GigabitEthernet{{ interface.interface_id }}
{% if interface.isis %}
 ip router isis
 mpls ip
{% endif %}
 ip address {{ interface.ip_address }}
 no shut
{% endfor %}
!
{% if isis %}
router isis
 net 49.0001.0000.0000.000{{ (loopback0_ip_address)[-1] }}.00
 metric-style wide
 is-type level-2-only
!
{% endif %}
router bgp {{ bgp_asn }}
{% for peer in bgp %}
 bgp log-neighbor-changes
 neighbor {{ peer.neighbor }} remote-as {{ peer.remote_as }}
 !
{% endfor %}
 !
{% for peer in bgp %}
 address-family vpnv4
  neighbor {{ peer.neighbor }} activate
  neighbor {{ peer.neighbor }} send-community extended
 exit-address-family
 !
{% endfor %}
!
route-map Allow permit 10